# 商家使用流程图

## 整体流程图

```
商家注册 → 申请API权限 → 配置系统 → 启动服务 → 管理订单 → 监控系统
    ↓           ↓           ↓         ↓         ↓         ↓
  实名认证    获取密钥    填写配置   自动运行   自动处理   定期维护
```

## 详细步骤

### 1. 准备阶段
```
商家准备
    ↓
申请拼多多开发者账号
    ↓
创建商家应用
    ↓
申请API权限
    ↓
获取API密钥
```

### 2. 部署阶段
```
下载系统文件
    ↓
运行部署脚本
    ↓
配置环境变量
    ↓
初始化数据库
    ↓
启动系统服务
```

### 3. 配置阶段
```
编辑配置文件
    ↓
填写API密钥
    ↓
设置通知邮箱
    ↓
配置核销规则
    ↓
测试系统功能
```

### 4. 使用阶段
```
系统自动运行
    ↓
监控订单状态
    ↓
自动处理订单
    ↓
发送虚拟商品
    ↓
自动核销订单
    ↓
记录操作日志
```

### 5. 管理阶段
```
查看订单列表
    ↓
处理异常订单
    ↓
查看核销记录
    ↓
导出数据报告
    ↓
系统性能监控
```

## 具体操作流程

### 订单处理流程
```
新订单产生
    ↓
系统检测订单
    ↓
判断商品类型
    ↓
虚拟商品？
    ├─ 是 → 自动发货 → 生成卡密 → 发送买家 → 更新状态
    └─ 否 → 跳过处理
    ↓
等待核销
    ↓
自动核销
    ↓
完成处理
```

### 核销处理流程
```
订单已发货
    ↓
检查核销条件
    ↓
满足核销条件？
    ├─ 是 → 执行核销 → 更新状态 → 记录日志
    └─ 否 → 继续等待
    ↓
核销完成
```

### 异常处理流程
```
检测到异常
    ↓
记录错误日志
    ↓
发送告警通知
    ↓
尝试自动恢复
    ↓
恢复成功？
    ├─ 是 → 继续处理
    └─ 否 → 等待人工处理
```

## 商家操作界面

### Web管理界面功能
```
主界面
├── 仪表板
│   ├── 系统状态
│   ├── 订单统计
│   └── 核销统计
├── 订单管理
│   ├── 订单列表
│   ├── 订单详情
│   └── 批量操作
├── 核销管理
│   ├── 核销记录
│   ├── 核销规则
│   └── 手动核销
├── 商品管理
│   ├── 商品列表
│   ├── 库存管理
│   └── 价格设置
├── 系统设置
│   ├── API配置
│   ├── 通知设置
│   └── 核销规则
└── 日志查看
    ├── 操作日志
    ├── 错误日志
    └── 系统日志
```

### 命令行操作
```bash
# 启动系统
python main.py

# 启动Web界面
python main.py web

# 手动处理订单
python scripts/manual_process.py

# 查看系统状态
python scripts/status_check.py

# 备份数据
python scripts/backup_data.py
```

## 常见使用场景

### 场景1：新商家首次使用
1. 注册拼多多开发者账号
2. 申请API权限
3. 下载并部署系统
4. 配置API密钥
5. 测试系统功能
6. 正式启用系统

### 场景2：日常订单处理
1. 系统自动监控订单
2. 识别虚拟商品订单
3. 自动生成卡密
4. 发送给买家
5. 更新订单状态
6. 记录处理日志

### 场景3：异常订单处理
1. 系统检测异常
2. 记录错误信息
3. 发送告警通知
4. 商家查看详情
5. 手动处理异常
6. 恢复正常流程

### 场景4：系统维护
1. 定期检查系统状态
2. 查看性能指标
3. 备份重要数据
4. 更新系统版本
5. 优化配置参数
6. 清理日志文件

## 技术支持流程

### 问题反馈流程
```
商家遇到问题
    ↓
查看帮助文档
    ↓
问题解决？
    ├─ 是 → 继续使用
    └─ 否 → 联系技术支持
    ↓
提供问题详情
    ↓
技术支持分析
    ↓
提供解决方案
    ↓
问题解决
```

### 远程协助流程
```
商家申请远程协助
    ↓
提供系统信息
    ↓
建立远程连接
    ↓
技术人员诊断
    ↓
远程修复问题
    ↓
验证修复结果
    ↓
结束协助
```

这样的流程图可以帮助商家更好地理解和使用系统，确保顺利部署和运行。
